import{j as E,k as A,d as L,b as C,r as o,o as B,c as M,w as t,a as e,u,g as v,f as G,p as $,q as z}from"./index-DEEauFT0.js";import{i as H}from"./DataTable.types-CX4v7_jN.js";import{h as P}from"./index-C_6iQcYl.js";import{r as N}from"./ruleUtils-C0l0TtdP.js";const U="http://lnx.simple.auth.test/api/sacraments",q=async i=>{try{const s=E();return(await A(s,U).post("/load-data-table/1",i)).data.data}catch{return H()}},J=async i=>{try{const s=E();return await A(s,U).post("/save",i),!0}catch{return!1}},Q=async i=>{try{const s=E();return await A(s,U).delete(`/delete/${i}`),!0}catch{return!1}},Y={date:[N],description:[],ministerId:[N]},Z=()=>({id:null,date:null,description:"",minister:null,participants:[],status:!0}),T=L({__name:"Form",props:{formState:{type:Object,default:()=>({})}},emits:["onSuccess"],setup(i,{emit:s}){const n=s,w=i,m=Y,p=C([{value:"2",title:"PEDRO SIGUAYRO MACHICADO"},{value:"3",title:"ALFREDO MAQUERA CHURA"},{value:"4",title:"JON FROSCRITO"},{value:"5",title:"NARCISO VALENCIA P."},{value:"6",title:"IRENE CHALCO GIMENEZ"}]),f=C(null),b=C(!1),d=C(!1),l=C({...Z(),...w.formState}),I=async()=>{const{valid:V}=await f.value.validate();if(!V)return;b.value=!0,await J(l.value)&&(l.value.id==null&&f.value.reset(),n("onSuccess"),d.value=!1),b.value=!1};return(V,a)=>{const O=o("v-text-field"),x=o("v-col"),R=o("v-select"),r=o("v-textarea"),_=o("v-row"),g=o("v-card-item"),y=o("v-btn"),k=o("v-spacer"),S=o("v-card-actions"),D=o("v-card"),j=o("v-form"),F=o("v-dialog");return B(),M(F,{"max-width":"400",modelValue:d.value,"onUpdate:modelValue":a[4]||(a[4]=c=>d.value=c),activator:"parent"},{default:t(()=>[e(j,{ref_key:"formRef",ref:f,onSubmit:G(I,["prevent"])},{default:t(()=>[e(D,{title:l.value.id?"Editar Registro":"Nuevo Registro"},{default:t(()=>[e(g,{class:"border-t border-b"},{default:t(()=>[e(_,null,{default:t(()=>[e(x,{cols:"12"},{default:t(()=>[e(O,{modelValue:l.value.date,"onUpdate:modelValue":a[0]||(a[0]=c=>l.value.date=c),label:"Fecha de bautismo",type:"date",rules:u(m).date,autocomplete:"off"},null,8,["modelValue","rules"])]),_:1}),e(x,{cols:"12"},{default:t(()=>[e(R,{label:"Ministro",modelValue:l.value.ministerId,"onUpdate:modelValue":a[1]||(a[1]=c=>l.value.ministerId=c),items:p.value,rules:u(m).ministerId},null,8,["modelValue","items","rules"])]),_:1}),e(x,{cols:"12"},{default:t(()=>[e(r,{modelValue:l.value.description,"onUpdate:modelValue":a[2]||(a[2]=c=>l.value.description=c),label:"Descripción",rules:u(m).description,rows:"2"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(S,null,{default:t(()=>[e(y,{type:"button",variant:"text",color:"secondary",onClick:a[3]||(a[3]=c=>d.value=!1)},{default:t(()=>a[5]||(a[5]=[v(" Cancelar ")])),_:1}),e(k),e(y,{text:"Guardar",color:"primary",type:"submit",loading:b.value},null,8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},512)]),_:1},8,["modelValue"])}}}),ee=L({__name:"index",setup(i){return(s,n)=>{const w=o("v-text-field"),m=o("v-col"),p=o("v-btn"),f=o("v-row"),b=o("v-card-item"),d=o("v-icon"),l=o("v-list-item"),I=o("LnxDialogConfirm"),V=o("v-list"),a=o("v-menu"),O=o("LnxDataTable"),x=o("v-card"),R=$("tooltip");return B(),M(x,{title:"Bautismos",subtitle:"Gestión de celebraciones de bautismo"},{default:t(()=>[e(O,{loadDataTable:u(q),headers:u(P)},{header:t(({request:r,loading:_,init:g,loadingTable:y,debouncedReload:k,reLoadDataTable:S})=>[e(b,{class:"border-t border-b"},{default:t(()=>[e(f,{class:"d-flex justify-space-between align-center"},{default:t(()=>[e(m,{cols:"12",md:"4"},{default:t(()=>[e(w,{modelValue:r.search,"onUpdate:modelValue":D=>r.search=D,label:"Buscar",clearable:"",onInput:k,"onClick:clear":S},null,8,["modelValue","onUpdate:modelValue","onInput","onClick:clear"])]),_:2},1024),e(m,{cols:"12",md:"4",class:"d-md-flex d-block justify-end text-end"},{default:t(()=>[e(p,{class:"me-2",disabled:_},{default:t(()=>[n[0]||(n[0]=v(" nuevo ")),e(u(T),{onOnSuccess:g},null,8,["onOnSuccess"])]),_:2},1032,["disabled"]),z(e(p,{density:"comfortable",icon:"mdi-reload",onClick:g,loading:y},null,8,["onClick","loading"]),[[R,"Recargar registros"]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),"item.actions":t(({item:r,loadDataTable:_})=>[e(p,{icon:"",size:"small",variant:"text"},{default:t(()=>[e(d,null,{default:t(()=>n[1]||(n[1]=[v(" mdi-dots-vertical ")])),_:1}),e(a,{activator:"parent"},{default:t(()=>[e(V,{nav:""},{default:t(()=>[e(l,{title:"Editar",density:"compact",value:"edit"},{prepend:t(()=>[e(d,{size:"small"},{default:t(()=>n[2]||(n[2]=[v(" mdi-pencil ")])),_:1})]),default:t(()=>[e(u(T),{formState:r,onOnSuccess:_},null,8,["formState","onOnSuccess"])]),_:2},1024),e(l,{title:"Eliminar",class:"text-red",density:"compact",value:"delete"},{prepend:t(()=>[e(d,{size:"small"},{default:t(()=>n[3]||(n[3]=[v(" mdi-delete ")])),_:1})]),default:t(()=>[e(I,{onOnConfirm:async()=>{await u(Q)(r.id),_()},message:"¿Está seguro de eliminar este registro?"},null,8,["onOnConfirm"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),"item.participants":t(({item:r})=>[e(p,{link:"",to:`/baptism/${r.id}/participants`,"prepend-icon":"mdi-account-multiple",variant:"text"},{default:t(()=>n[4]||(n[4]=[v(" Participantes ")])),_:2},1032,["to"])]),_:1},8,["loadDataTable","headers"])]),_:1})}}});export{ee as default};
