import{_ as I,a as S}from"./position.services-Ch_tZ3L6.js";import{_ as B,d as V}from"./debounce-Bz1f7fWb.js";import{_ as N}from"./DialogConfirm.vue_vue_type_script_setup_true_lang-Cxfsjbfz.js";import{d as D,e as v,r as n,h as k,o as c,c as _,w as t,i as f,a,g as r,u as y,t as j}from"./index-DgXLauUC.js";import"./ruleUtils-DaB-ACZt.js";const z=[{title:"Op.",key:"actions",value:"actions",fixed:!0,width:"50px",sortable:!1},{title:"Nombre",key:"name",value:"name"},{title:"Descripción",key:"description",value:"description"},{title:"Estado",key:"status",value:"status"}],R=D({__name:"DataTable",props:{options:{},items:{},loading:{type:Boolean},total:{}},emits:["onUpdateTable"],setup(P,{emit:m}){const i=m,d=v(!1),x=async s=>{d.value=!0,await I(s)&&i("onUpdateTable"),d.value=!1};return(s,e)=>{const l=n("v-icon"),b=n("v-list-item"),g=n("v-list"),p=n("v-menu"),T=n("v-btn"),w=n("v-data-table-server"),u=k("permission");return c(),_(w,{"items-per-page":s.options.itemsPerPage,"onUpdate:itemsPerPage":[e[1]||(e[1]=o=>s.options.itemsPerPage=o),e[4]||(e[4]=o=>i("onUpdateTable"))],"sort-by":s.options.sortBy,"onUpdate:sortBy":[e[2]||(e[2]=o=>s.options.sortBy=o),e[5]||(e[5]=o=>i("onUpdateTable"))],page:s.options.page,"onUpdate:page":[e[3]||(e[3]=o=>s.options.page=o),e[6]||(e[6]=o=>i("onUpdateTable"))],headers:y(z),items:s.items,"items-length":s.total,loading:d.value,"item-value":"id","multi-sort":""},{"item.actions":t(({item:o})=>[f((c(),_(T,{icon:"",density:"compact",variant:"text"},{default:t(()=>[a(l,null,{default:t(()=>e[7]||(e[7]=[r("mdi-dots-vertical")])),_:1}),a(p,{activator:"parent"},{default:t(()=>[a(g,{density:"compact"},{default:t(()=>[f((c(),_(b,{key:"edit",value:"edit","append-icon":"mdi-pencil",class:"text-subtitle-2"},{append:t(()=>[a(l,{size:"small"},{default:t(()=>e[8]||(e[8]=[r(" mdi-pencil ")])),_:1})]),default:t(()=>[e[9]||(e[9]=r(" Editar ")),a(y(B),{formState:o,onOnSuccess:e[0]||(e[0]=C=>i("onUpdateTable"))},null,8,["formState"])]),_:2},1024)),[[u,["positions.edit"]]]),f((c(),_(b,{key:"delete",value:"delete",class:"text-red text-subtitle-2"},{append:t(()=>[a(l,{size:"small",color:"red"},{default:t(()=>e[10]||(e[10]=[r(" mdi-delete ")])),_:1})]),default:t(()=>[e[11]||(e[11]=r(" Eliminar ")),a(N,{title:"Eliminar",message:"¿Está seguro de eliminar este registro?","text-cancel":"No","text-confirm":"Confirmar",loading:d.value,onOnConfirm:()=>x(o.id)},null,8,["loading","onOnConfirm"])]),_:2},1024)),[[u,["positions.delete"]]])]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[u,["positions.edit","positions.delete"]]])]),"item.status":t(({item:o})=>[a(T,{color:o.status?"blue":"error","text-color":"white",density:"compact",variant:"tonal"},{default:t(()=>[r(j(o.status?"Habilitado":"Deshabilitado"),1)]),_:2},1032,["color"])]),_:1},8,["items-per-page","sort-by","page","headers","items","items-length","loading"])}}}),F=D({__name:"index",setup(P){const m=v(!1),i=v(!1),d=v([]),x=v(0),s=v({itemsPerPage:10,sortBy:[],page:1,search:"",filters:{}}),e=V(()=>{l()},400),l=async()=>{i.value=!0;const g=await S(s.value);d.value=g.data,x.value=g.total,i.value=!1},b=async()=>{m.value=!0,await l(),m.value=!1};return b(),(g,p)=>{const T=n("v-text-field"),w=n("v-col"),u=n("v-btn"),o=n("v-row"),C=n("v-card-item"),$=n("v-card"),U=k("permission"),O=k("tooltip");return c(),_($,{title:"Cargos",subtitle:"Gestion de Cargos de Trabajo",disabled:m.value},{default:t(()=>[a(C,{class:"border-t border-b"},{default:t(()=>[a(o,{class:"d-flex justify-space-between"},{default:t(()=>[a(w,{cols:"12",md:"4"},{default:t(()=>[a(T,{modelValue:s.value.search,"onUpdate:modelValue":p[0]||(p[0]=E=>s.value.search=E),label:"Buscar",clearable:"",onInput:y(e)},null,8,["modelValue","onInput"])]),_:1}),a(w,{cols:"12",md:"4",class:"d-md-flex d-block justify-end text-end"},{default:t(()=>[f((c(),_(u,{class:"h-md-auto me-2",disabled:m.value},{default:t(()=>[p[1]||(p[1]=r(" nuevo ")),a(y(B),{onOnSuccess:l})]),_:1},8,["disabled"])),[[U,["positions.create"]]]),f(a(u,{class:"h-md-auto",density:"comfortable",icon:"mdi-reload",onClick:b,loading:i.value},null,8,["loading"]),[[O,"Recargar registros"],[U,["positions.index"]]])]),_:1})]),_:1})]),_:1}),f(a(y(R),{options:s.value,loading:i.value,items:d.value,total:x.value,onOnUpdateTable:l},null,8,["options","loading","items","total"]),[[U,["positions.index"]]])]),_:1},8,["disabled"])}}});export{F as default};
