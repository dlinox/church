import{y as N,z as I,d as L,b as C,r as o,o as v,c as f,w as e,a as t,u as b,g as x,f as P,h as z,i as y,t as $}from"./index-DkPFh2QW.js";import{i as G}from"./DataTable.types-CX4v7_jN.js";import{r as M}from"./ruleUtils-Dk9EfJu0.js";const U="https://church-api.linox.net.pe/api/parishes",A=async i=>{try{const a=N();return(await I(a,U).post("/load-data-table",i)).data.data}catch{return G()}},F=async i=>{try{const a=N();return await I(a,U).post("/save",i),!0}catch{return!1}},H=async i=>{try{const a=N();return await I(a,U).delete(`/delete/${i}`),!0}catch{return!1}},J=[{title:"Op.",key:"actions",value:"actions",fixed:!0,width:"50px",sortable:!1},{title:"Nombre",key:"name",value:"name"}],K={name:[M],address:[],phoneNumber:[],country:[],location:[]},Q=()=>({name:""}),E=L({__name:"Form",props:{formState:{type:Object,default:()=>({})}},emits:["onSuccess"],setup(i,{emit:a}){const n=a,S=i,g=K,c=C(null),u=C(!1),m=C(!1),r=C({...Q(),...S.formState}),w=async()=>{if(u.value)return;const{valid:k}=await c.value.validate();if(!k)return;u.value=!0,await F(r.value)&&(r.value.id==null&&c.value.reset(),n("onSuccess"),m.value=!1),u.value=!1};return(k,s)=>{const h=o("v-text-field"),D=o("v-col"),O=o("v-row"),q=o("v-card-item"),d=o("v-btn"),R=o("v-spacer"),l=o("v-card-actions"),_=o("v-card"),V=o("v-form"),T=o("v-dialog");return v(),f(T,{"max-width":"800",modelValue:m.value,"onUpdate:modelValue":s[2]||(s[2]=p=>m.value=p),activator:"parent"},{default:e(()=>[t(V,{ref_key:"formRef",ref:c,onSubmit:P(w,["prevent"])},{default:e(()=>[t(_,{title:r.value.id?"Editar Registro":"Nuevo Registro"},{default:e(()=>[t(q,{class:"border-t border-b"},{default:e(()=>[t(O,null,{default:e(()=>[t(D,{cols:"12"},{default:e(()=>[t(h,{label:"Nombre",modelValue:r.value.name,"onUpdate:modelValue":s[0]||(s[0]=p=>r.value.name=p),modelModifiers:{number:!0},rules:b(g).name},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),t(l,null,{default:e(()=>[t(d,{type:"button",variant:"text",color:"secondary",onClick:s[1]||(s[1]=p=>m.value=!1)},{default:e(()=>s[3]||(s[3]=[x(" Cancelar ")])),_:1}),t(R),t(d,{text:"Guardar",color:"primary",type:"submit",loading:u.value},null,8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},512)]),_:1},8,["modelValue"])}}}),Z=L({__name:"index",setup(i){return(a,n)=>{const S=o("v-text-field"),g=o("v-col"),c=o("v-btn"),u=o("v-row"),m=o("v-card-item"),r=o("v-icon"),w=o("v-list-item"),k=o("LnxDialogConfirm"),s=o("v-list"),h=o("v-menu"),D=o("v-chip"),O=o("LnxDataTable"),q=o("v-card"),d=z("permission"),R=z("tooltip");return v(),f(q,{title:"Parroquias",subtitle:"Gestión de parroquias"},{default:e(()=>[t(O,{loadDataTable:b(A),headers:b(J)},{header:e(({request:l,loading:_,init:V,loadingTable:T,debouncedReload:p,reLoadDataTable:j})=>[t(m,{class:"border-t border-b"},{default:e(()=>[t(u,{class:"d-flex justify-space-between align-center"},{default:e(()=>[t(g,{cols:"12",md:"4"},{default:e(()=>[t(S,{modelValue:l.search,"onUpdate:modelValue":B=>l.search=B,label:"Buscar",clearable:"",onInput:p,"onClick:clear":j},null,8,["modelValue","onUpdate:modelValue","onInput","onClick:clear"])]),_:2},1024),t(g,{cols:"12",md:"4",class:"d-md-flex d-block justify-end text-end"},{default:e(()=>[y((v(),f(c,{class:"me-2",disabled:_},{default:e(()=>[n[0]||(n[0]=x(" nuevo ")),t(b(E),{onOnSuccess:V},null,8,["onOnSuccess"])]),_:2},1032,["disabled"])),[[d,["crear_parroquia"]]]),y(t(c,{density:"comfortable",icon:"mdi-reload",onClick:V,loading:T},null,8,["onClick","loading"]),[[R,"Recargar registros"]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),"item.actions":e(({item:l,loadDataTable:_})=>[y((v(),f(c,{icon:"",size:"small",variant:"text"},{default:e(()=>[t(r,null,{default:e(()=>n[1]||(n[1]=[x(" mdi-dots-vertical ")])),_:1}),t(h,{activator:"parent"},{default:e(()=>[t(s,{nav:""},{default:e(()=>[y((v(),f(w,{title:"Editar",density:"compact",value:"edit"},{prepend:e(()=>[t(r,{size:"small"},{default:e(()=>n[2]||(n[2]=[x(" mdi-pencil ")])),_:1})]),default:e(()=>[t(b(E),{formState:l,onOnSuccess:_},null,8,["formState","onOnSuccess"])]),_:2},1024)),[[d,["editar_parroquia"]]]),y((v(),f(w,{title:"Eliminar",class:"text-red",density:"compact",value:"delete"},{prepend:e(()=>[t(r,{size:"small"},{default:e(()=>n[3]||(n[3]=[x(" mdi-delete ")])),_:1})]),default:e(()=>[t(k,{onOnConfirm:async()=>{await b(H)(l.id),_()},message:"¿Está seguro de eliminar este registro?"},null,8,["onOnConfirm"])]),_:2},1024)),[[d,["eliminar_parroquia"]]])]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[d,["editar_parroquia","eliminar_parroquia"]]])]),"item.status":e(({item:l})=>[t(D,{small:"",color:l.status?"info":"error"},{default:e(()=>[x($(l.status?"Activo":"Inactivo"),1)]),_:2},1032,["color"])]),_:1},8,["loadDataTable","headers"])]),_:1})}}});export{Z as default};
