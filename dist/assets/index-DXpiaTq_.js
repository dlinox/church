import{j as R,k as T,d as L,b as w,r as o,o as U,c as j,w as t,a as e,u as p,g as v,f as q,p as z,q as B,t as P}from"./index-DEEauFT0.js";import{i as $}from"./DataTable.types-CX4v7_jN.js";import{r as M}from"./ruleUtils-C0l0TtdP.js";const N="http://lnx.simple.auth.test/api/parishes",A=async i=>{try{const a=R();return(await T(a,N).post("/load-data-table",i)).data.data}catch{return $()}},F=async i=>{try{const a=R();return await T(a,N).post("/save",i),!0}catch{return!1}},G=async i=>{try{const a=R();return await T(a,N).delete(`/delete/${i}`),!0}catch{return!1}},H=[{title:"Op.",key:"actions",value:"actions",fixed:!0,width:"50px",sortable:!1},{title:"Nombre",key:"name",value:"name"}],J={name:[M],address:[],phoneNumber:[],country:[],location:[]},K=()=>({name:""}),I=L({__name:"Form",props:{formState:{type:Object,default:()=>({})}},emits:["onSuccess"],setup(i,{emit:a}){const n=a,k=i,f=J,c=w(null),d=w(!1),u=w(!1),r=w({...K(),...k.formState}),b=async()=>{if(d.value)return;const{valid:x}=await c.value.validate();if(!x)return;d.value=!0,await F(r.value)&&(r.value.id==null&&c.value.reset(),n("onSuccess"),u.value=!1),d.value=!1};return(x,l)=>{const V=o("v-text-field"),C=o("v-col"),S=o("v-row"),D=o("v-card-item"),y=o("v-btn"),s=o("v-spacer"),m=o("v-card-actions"),g=o("v-card"),h=o("v-form"),O=o("v-dialog");return U(),j(O,{"max-width":"800",modelValue:u.value,"onUpdate:modelValue":l[2]||(l[2]=_=>u.value=_),activator:"parent"},{default:t(()=>[e(h,{ref_key:"formRef",ref:c,onSubmit:q(b,["prevent"])},{default:t(()=>[e(g,{title:r.value.id?"Editar Registro":"Nuevo Registro"},{default:t(()=>[e(D,{class:"border-t border-b"},{default:t(()=>[e(S,null,{default:t(()=>[e(C,{cols:"12"},{default:t(()=>[e(V,{label:"Nombre",modelValue:r.value.name,"onUpdate:modelValue":l[0]||(l[0]=_=>r.value.name=_),modelModifiers:{number:!0},rules:p(f).name},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(y,{type:"button",variant:"text",color:"secondary",onClick:l[1]||(l[1]=_=>u.value=!1)},{default:t(()=>l[3]||(l[3]=[v(" Cancelar ")])),_:1}),e(s),e(y,{text:"Guardar",color:"primary",type:"submit",loading:d.value},null,8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},512)]),_:1},8,["modelValue"])}}}),Y=L({__name:"index",setup(i){return(a,n)=>{const k=o("v-text-field"),f=o("v-col"),c=o("v-btn"),d=o("v-row"),u=o("v-card-item"),r=o("v-icon"),b=o("v-list-item"),x=o("LnxDialogConfirm"),l=o("v-list"),V=o("v-menu"),C=o("v-chip"),S=o("LnxDataTable"),D=o("v-card"),y=z("tooltip");return U(),j(D,{title:"Parroquias",subtitle:"Listado de parroquias"},{default:t(()=>[e(S,{loadDataTable:p(A),headers:p(H)},{header:t(({request:s,loading:m,init:g,loadingTable:h,debouncedReload:O,reLoadDataTable:_})=>[e(u,{class:"border-t border-b"},{default:t(()=>[e(d,{class:"d-flex justify-space-between align-center"},{default:t(()=>[e(f,{cols:"12",md:"4"},{default:t(()=>[e(k,{modelValue:s.search,"onUpdate:modelValue":E=>s.search=E,label:"Buscar",clearable:"",onInput:O,"onClick:clear":_},null,8,["modelValue","onUpdate:modelValue","onInput","onClick:clear"])]),_:2},1024),e(f,{cols:"12",md:"4",class:"d-md-flex d-block justify-end text-end"},{default:t(()=>[e(c,{class:"me-2",disabled:m},{default:t(()=>[n[0]||(n[0]=v(" nuevo ")),e(p(I),{onOnSuccess:g},null,8,["onOnSuccess"])]),_:2},1032,["disabled"]),B(e(c,{density:"comfortable",icon:"mdi-reload",onClick:g,loading:h},null,8,["onClick","loading"]),[[y,"Recargar registros"]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),"item.actions":t(({item:s,loadDataTable:m})=>[e(c,{icon:"",size:"small",variant:"text"},{default:t(()=>[e(r,null,{default:t(()=>n[1]||(n[1]=[v(" mdi-dots-vertical ")])),_:1}),e(V,{activator:"parent"},{default:t(()=>[e(l,{nav:""},{default:t(()=>[e(b,{title:"Editar",density:"compact",value:"edit"},{prepend:t(()=>[e(r,{size:"small"},{default:t(()=>n[2]||(n[2]=[v(" mdi-pencil ")])),_:1})]),default:t(()=>[e(p(I),{formState:s,onOnSuccess:m},null,8,["formState","onOnSuccess"])]),_:2},1024),e(b,{title:"Eliminar",class:"text-red",density:"compact",value:"delete"},{prepend:t(()=>[e(r,{size:"small"},{default:t(()=>n[3]||(n[3]=[v(" mdi-delete ")])),_:1})]),default:t(()=>[e(x,{onOnConfirm:async()=>{await p(G)(s.id),m()},message:"¿Está seguro de eliminar este registro?"},null,8,["onOnConfirm"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),"item.status":t(({item:s})=>[e(C,{small:"",color:s.status?"info":"error"},{default:t(()=>[v(P(s.status?"Activo":"Inactivo"),1)]),_:2},1032,["color"])]),_:1},8,["loadDataTable","headers"])]),_:1})}}});export{Y as default};
