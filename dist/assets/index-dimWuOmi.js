import{_ as M,a as R,b as A}from"./worker.services-DwqU9X1F.js";import{d as P,e as c,r as n,o as N,c as w,w as a,a as e,u as d,g as x,f as G,h as I,i as k,t as q}from"./index-DgXLauUC.js";import{c as H}from"./position.services-Ch_tZ3L6.js";import{r as f}from"./ruleUtils-DaB-ACZt.js";import{_ as W}from"./DialogConfirm.vue_vue_type_script_setup_true_lang-Cxfsjbfz.js";const g={documentType:[f],documentNumber:[f],name:[f],paternalLastName:[f],maternalLastName:[f],birthDate:[],gender:[f],phoneNumber:[f],email:[],status:[f],positionId:[],description:[]},z=()=>({id:null,documentType:"DNI",documentNumber:"",name:"",paternalLastName:"",maternalLastName:"",birthDate:null,gender:"M",phoneNumber:"",email:null,status:!0,positionId:null}),B=P({__name:"Form",props:{formState:{type:Object,default:()=>({})}},emits:["onSuccess"],setup(L,{emit:_}){const m=_,u=L,s=c(!1),p=c(!1),l=c({...z(),...u.formState}),V=c([]),y=async()=>{s.value=!0,await M(l.value)&&(m("onSuccess"),p.value=!1),s.value=!1};return(async()=>{console.log("init"),V.value=await H()})(),(U,t)=>{const i=n("v-select"),r=n("v-col"),v=n("v-text-field"),S=n("v-switch"),T=n("v-row"),C=n("v-card-item"),D=n("v-btn"),$=n("v-spacer"),O=n("v-card-actions"),E=n("v-card"),j=n("v-form"),F=n("v-dialog");return N(),w(F,{"max-width":"700",modelValue:p.value,"onUpdate:modelValue":t[12]||(t[12]=o=>p.value=o),activator:"parent"},{default:a(()=>[e(j,{ref:"formRef",onSubmit:G(y,["prevent"])},{default:a(()=>[e(E,{title:l.value.id?"Editar Registro":"Nuevo Registro"},{default:a(()=>[e(C,{class:"border-t border-b"},{default:a(()=>[e(T,null,{default:a(()=>[e(r,{cols:"12",md:"6"},{default:a(()=>[e(i,{modelValue:l.value.documentType,"onUpdate:modelValue":t[0]||(t[0]=o=>l.value.documentType=o),items:["DNI"],label:"Tipo de documento",rules:d(g).documentType},null,8,["modelValue","rules"])]),_:1}),e(r,{cols:"12",md:"6"},{default:a(()=>[e(v,{modelValue:l.value.documentNumber,"onUpdate:modelValue":t[1]||(t[1]=o=>l.value.documentNumber=o),label:"Número de documento",rules:d(g).documentNumber},null,8,["modelValue","rules"])]),_:1}),e(r,{cols:"12"},{default:a(()=>[e(v,{modelValue:l.value.name,"onUpdate:modelValue":t[2]||(t[2]=o=>l.value.name=o),label:"Nombre",rules:d(g).name},null,8,["modelValue","rules"])]),_:1}),e(r,{cols:"12"},{default:a(()=>[e(v,{modelValue:l.value.paternalLastName,"onUpdate:modelValue":t[3]||(t[3]=o=>l.value.paternalLastName=o),label:"Apellido paterno",rules:d(g).paternalLastName},null,8,["modelValue","rules"])]),_:1}),e(r,{cols:"12"},{default:a(()=>[e(v,{modelValue:l.value.maternalLastName,"onUpdate:modelValue":t[4]||(t[4]=o=>l.value.maternalLastName=o),label:"Apellido materno",rules:d(g).maternalLastName},null,8,["modelValue","rules"])]),_:1}),e(r,{cols:"12"},{default:a(()=>[e(v,{modelValue:l.value.email,"onUpdate:modelValue":t[5]||(t[5]=o=>l.value.email=o),label:"Correo electrónico",rules:d(g).email},null,8,["modelValue","rules"])]),_:1}),e(r,{cols:"12"},{default:a(()=>[e(v,{modelValue:l.value.phoneNumber,"onUpdate:modelValue":t[6]||(t[6]=o=>l.value.phoneNumber=o),label:"Número de teléfono",rules:d(g).phoneNumber},null,8,["modelValue","rules"])]),_:1}),e(r,{cols:"12"},{default:a(()=>[e(v,{modelValue:l.value.birthDate,"onUpdate:modelValue":t[7]||(t[7]=o=>l.value.birthDate=o),label:"Fecha de nacimiento",type:"date",rules:d(g).birthDate},null,8,["modelValue","rules"])]),_:1}),e(r,{cols:"12"},{default:a(()=>[e(i,{modelValue:l.value.gender,"onUpdate:modelValue":t[8]||(t[8]=o=>l.value.gender=o),items:[{title:"Masculino",value:"M"},{title:"Femenino",value:"F"}],label:"Género"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12"},{default:a(()=>[e(i,{modelValue:l.value.positionId,"onUpdate:modelValue":t[9]||(t[9]=o=>l.value.positionId=o),items:V.value,label:"Cargo","item-title":"title","item-value":"value"},null,8,["modelValue","items"])]),_:1}),e(r,{cols:"12"},{default:a(()=>[e(S,{label:l.value.status?"Habilitado":"Deshabilitado",modelValue:l.value.status,"onUpdate:modelValue":t[10]||(t[10]=o=>l.value.status=o),color:"blue-darken-4",inset:""},null,8,["label","modelValue"])]),_:1})]),_:1})]),_:1}),e(O,null,{default:a(()=>[e(D,{type:"button",variant:"text",color:"secondary",onClick:t[11]||(t[11]=o=>p.value=!1)},{default:a(()=>t[13]||(t[13]=[x(" Cancelar ")])),_:1}),e($),e(D,{text:"Guardar",color:"primary",type:"submit",loading:s.value},null,8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},512)]),_:1},8,["modelValue"])}}}),J=[{title:"Op.",key:"actions",value:"actions",fixed:!0,width:"50px",sortable:!1},{title:"Documento",key:"documentNumber",value:"documentNumber"},{title:"Nombre",key:"name",value:"name"},{title:"Apellido Paterno",key:"paternalLastName",value:"paternalLastName"},{title:"Apellido Materno",key:"maternalLastName",value:"maternalLastName"},{title:"Fecha de Nacimiento",key:"birthDate",value:"birthDate"},{title:"Género",key:"gender",value:"gender"},{title:"Estado",key:"status",value:"status"}],K=P({__name:"DataTable",props:{options:{},items:{},loading:{type:Boolean},total:{}},emits:["onUpdateTable"],setup(L,{emit:_}){const m=_;return(u,s)=>{const p=n("v-icon"),l=n("v-list-item"),V=n("v-list"),y=n("v-menu"),b=n("v-btn"),U=n("v-data-table-server"),t=I("permission");return N(),w(U,{"items-per-page":u.options.itemsPerPage,"onUpdate:itemsPerPage":[s[1]||(s[1]=i=>u.options.itemsPerPage=i),s[4]||(s[4]=i=>m("onUpdateTable"))],"sort-by":u.options.sortBy,"onUpdate:sortBy":[s[2]||(s[2]=i=>u.options.sortBy=i),s[5]||(s[5]=i=>m("onUpdateTable"))],page:u.options.page,"onUpdate:page":[s[3]||(s[3]=i=>u.options.page=i),s[6]||(s[6]=i=>m("onUpdateTable"))],headers:d(J),items:u.items,"items-length":u.total,loading:u.loading,"item-value":"id","multi-sort":""},{"item.actions":a(({item:i})=>[k((N(),w(b,{icon:"",density:"compact",variant:"text"},{default:a(()=>[e(p,null,{default:a(()=>s[7]||(s[7]=[x("mdi-dots-vertical")])),_:1}),e(y,{activator:"parent"},{default:a(()=>[e(V,{density:"compact"},{default:a(()=>[k((N(),w(l,{key:"edit",value:"edit",title:"Editar","append-icon":"mdi-pencil"},{default:a(()=>[e(d(B),{formState:i,onOnSuccess:s[0]||(s[0]=r=>m("onUpdateTable"))},null,8,["formState"])]),_:2},1024)),[[t,["workers.edit"]]]),k((N(),w(l,{key:"delete",value:"delete",title:"Eliminar",class:"text-red","append-icon":"mdi-delete"},{default:a(()=>[e(W,{title:"Eliminar",message:"¿Está seguro de eliminar este registro?",onOnConfirm:async()=>{await d(R)(i.id)&&m("onUpdateTable")}},null,8,["onOnConfirm"])]),_:2},1024)),[[t,["workers.delete"]]])]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[t,["workers.edit","workers.delete"]]])]),"item.status":a(({item:i})=>[e(b,{color:i.status?"blue":"error","text-color":"white",density:"compact",variant:"tonal"},{default:a(()=>[x(q(i.status?"Habilitado":"Deshabilitado"),1)]),_:2},1032,["color"])]),_:1},8,["items-per-page","sort-by","page","headers","items","items-length","loading"])}}}),ee=P({__name:"index",setup(L){const _=c(!1),m=c(!1),u=c([]),s=c(0),p=c({itemsPerPage:10,sortBy:[],page:1,search:"",filters:{}}),l=async()=>{m.value=!0;const y=await A(p.value);u.value=y.data,s.value=y.total,m.value=!1},V=async()=>{_.value=!0,await l(),_.value=!1};return V(),(y,b)=>{const U=n("v-text-field"),t=n("v-col"),i=n("v-btn"),r=n("v-row"),v=n("v-card-item"),S=n("v-card"),T=I("permission"),C=I("tooltip");return N(),w(S,{title:"Trabajadores",subtitle:"Gestión de trabajadores",disabled:_.value},{default:a(()=>[e(v,{class:"border-t border-b"},{default:a(()=>[e(r,{class:"d-flex justify-space-between"},{default:a(()=>[e(t,{cols:"12",md:"4"},{default:a(()=>[e(U,{modelValue:p.value.search,"onUpdate:modelValue":b[0]||(b[0]=D=>p.value.search=D),label:"Buscar",clearable:"",onInput:l},null,8,["modelValue"])]),_:1}),e(t,{cols:"12",md:"4",class:"d-md-flex d-block justify-end text-end"},{default:a(()=>[k((N(),w(i,{class:"h-md-auto me-2",disabled:_.value},{default:a(()=>[b[1]||(b[1]=x(" nuevo ")),e(d(B),{onOnSuccess:l})]),_:1},8,["disabled"])),[[T,["workers.create"]]]),k(e(i,{class:"h-md-auto",density:"comfortable",icon:"mdi-reload",onClick:V,loading:m.value},null,8,["loading"]),[[C,"Recargar registros"],[T,["workers.index"]]])]),_:1})]),_:1})]),_:1}),k(e(d(K),{options:p.value,loading:m.value,items:u.value,total:s.value,onOnUpdateTable:l},null,8,["options","loading","items","total"]),[[T,["workers.index"]]])]),_:1},8,["disabled"])}}});export{ee as default};
